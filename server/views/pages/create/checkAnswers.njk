{% extends "layout.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "partials/inductionMeetingDetailsSummary.njk" import inductionMeetingDetails %}
{% from "partials/additionalConditionsSummary.njk" import additionalConditions %}
{% from "partials/bespokeConditionsSummary.njk" import bespokeConditions %}

{% set pageTitle = applicationName + " - Create a licence - Check your answers" %}
{% set pageId = "check-answers-page" %}

{% set isEditable = licence.statusCode == 'IN_PROGRESS' %}

{% macro additionalConditionHtml(template, data) %}
    <div class="govuk-!-margin-bottom-4">
        {{ template }}
    </div>
    <div class="govuk-!-font-weight-bold">
        {% for entry in data %}
            <span class="govuk-!-display-block">{{ entry }}</span>
        {% endfor %}
    </div>
{% endmacro %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-three-quarters">
            <span class="govuk-caption-m">{{ licence.forename + " " + licence.surname }}</span>
            <h1 class="govuk-heading-l">Check your answers</h1>
        </div>
    </div>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds-from-desktop">

            {{ inductionMeetingDetails(licence, isEditable) }}
            {{ additionalConditions(licence, isEditable) }}
            {{ bespokeConditions(licence, isEditable) }}

            {% if isEditable %}
                <form method="POST">
                    <input type="hidden" name="_csrf" value="{{ csrfToken }}">
                    <input type="hidden" name="answers-checked" value="true">
                    {{ govukButton({
                        text: "Send licence conditions to prison",
                        attributes: { 'data-qa': 'send-licence-conditions' }
                    }) }}
                </form>
            {% endif %}
            <a href="/licence/create/caseload" class="govuk-link govuk-!-font-size-19">Return to caseload</a>
        </div>
    </div>
{% endblock %}
